window.__require=function t(e,i,c){function n(s,a){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+s+"'")}}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return n(e[s][1][t]||t)},h,h.exports,t,e,i,c)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<c.length;s++)n(c[s]);return n}({Config:[function(t,e,i){"use strict";cc._RF.push(e,"426f9MBLS9KMZ3Puqj+EbuG","Config"),e.exports={DEBUG_MODE:!1,IN_FB:!!window.FBInstant,GAME_OVER_ADID:"1827971447253601_1828922380491841",FIRST_BRIDGE_WIDTH:180,BRIDGE_WIDTH_MIN:40,BRIDGE_WIDTH_MAX:120,BRIDGE_BORDER_WIDTH:2,BRIDGE_SPACE_MIN:40,STICK_DURATION:.4,STICK_WIDTH:15,STICK_GROW_SPEED:340,STICK_BORDER_WIDTH:1,MOVE_DURATION:.3,SCORE_SCALE_DURATION:.3,CHICK_RUNTIME:.8,OVER_DURATION:.3,BOMB_OFFSETY:60,SHAKE_DURATION:.05,SHAKE_OFFSET:20,SHAKE_COUNT:3,RESULT_SCALE_DURATION1:.2,RESULT_SCALE_DURATION2:.1,HELP_SCALE_DURATION1:.2,HELP_SCALE_DURATION2:.1,BOARD_DURATION:.6,BOARD_ROTATE:15},cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"01c8cGuLXlLLoMvrHeE4rZV","Utils");var c=t("Config"),n=c.DEBUG_MODE,o=c.IN_FB;e.exports={deviceDetection:function(){var t=navigator.userAgent,e="",i="";try{/android/i.test(t)?(i="android",e=t.match(/Android\s+([\d\.]+)/i)[0].replace("Android ","")):/ipad|iphone|ipod/i.test(t)&&(i="ios",e=t.match(/OS\s+([\d_]+)/i)[0].replace(/_/g,".").replace("OS ",""))}catch(t){console.error(t)}return{osVersion:e,device:i}},log:function(t){cc.log(t)},initDebug:function(){if(n){var t=cc.find("Canvas/debugPanel").getComponent("debug");this.log=function(e){t.log(e)}}},getRandom:function(t,e){return parseInt(Math.random()*(e-t)+t)},inviteFriend:function(){var t=this;o&&FBInstant.context.chooseAsync().then(function(){t.log("inviteFriend")})}},cc._RF.pop()},{Config:"Config"}],bgManager:[function(t,e,i){"use strict";cc._RF.push(e,"277eap7D0JPsaMxUs1+5XJt","bgManager"),cc.Class({extends:cc.Component,properties:{bgPrefab:cc.Prefab},onLoad:function(){this.bgPool=new cc.NodePool;for(var t=0;t<2;t++){var e=cc.instantiate(this.bgPrefab);this.bgPool.put(e)}},start:function(){this.latestBg=null,this.createBg()},update:function(t){var e=this.latestBg;e&&(e.convertToWorldSpaceAR(cc.Vec2.ZERO).x+e.width/2<cc.winSize.width+10&&this.createBg())},createBg:function(){var t=this.latestBg,e=null;(e=this.bgPool.size()>0?this.bgPool.get():cc.instantiate(this.bgPrefab)).position=t?cc.v2(t.x+t.width,t.y):cc.v2(-cc.winSize.width/2,0),e.parent=this.node,e.getComponent("bg").manager=this,this.latestBg=e},removeBg:function(t){this.bgPool.put(t)}}),cc._RF.pop()},{}],bg:[function(t,e,i){"use strict";cc._RF.push(e,"679abt9TclHxLi38656sJP/","bg"),cc.Class({extends:cc.Component,properties:{manager:{default:null,serializable:!1}},onLoad:function(){},start:function(){},update:function(t){this.node.convertToWorldSpaceAR(cc.Vec2.ZERO).x+this.node.width/2<0&&this.manager.removeBg(this.node)}}),cc._RF.pop()},{}],bridgeManager:[function(t,e,i){"use strict";cc._RF.push(e,"4f0feQ/PgJFVKmUJ/xKAsJN","bridgeManager"),cc.Class({extends:cc.Component,properties:{bridgePrefab:cc.Prefab},onLoad:function(){this.bridgePool=new cc.NodePool;for(var t=0;t<2;t++){var e=cc.instantiate(this.bridgePrefab);this.bridgePool.put(e)}},start:function(){this.currentBridge=null,this.targetBridge=null,this.bridgeCount=0,this.createBridge(),this.createBridge()},update:function(t){},createBridge:function(){this.bridgeCount+=1;var t=null;t=this.bridgePool.size()>0?this.bridgePool.get():cc.instantiate(this.bridgePrefab);var e=this.targetBridge;t.getComponent("bridge").init(e,this),this.node.addChild(t),this.currentBridge=e,this.targetBridge=t},removeBridge:function(t){this.bridgePool.put(t)}}),cc._RF.pop()},{}],bridge:[function(t,e,i){"use strict";cc._RF.push(e,"65fcfjDN4xK25pPT3hTJk5w","bridge");var c=t("Config"),n=t("Utils"),o=c.FIRST_BRIDGE_WIDTH,s=c.BRIDGE_WIDTH_MIN,a=c.BRIDGE_WIDTH_MAX,r=c.BRIDGE_BORDER_WIDTH,u=c.BRIDGE_SPACE_MIN;cc.Class({extends:cc.Component,properties:{manager:{default:null,serializable:!1}},onLoad:function(){},start:function(){},init:function(t,e){var i=this.node,c=i.getChildByName("inner");if(t){var h=n.getRandom(s,a),d=cc.winSize.width-o-h,l=d>u?n.getRandom(u,d):u;e.bridgeCount<10&&(l/=2),i.width=h,c.width=h-2*r,i.position=cc.v2(t.x+t.width+l,-cc.winSize.height/2)}else i.width=o,c.width=o-2*r,i.position=cc.v2(-cc.winSize.width/2,-cc.winSize.height/2);var g=cc.winSize.height/3;i.height=g,c.height=g-r,this.manager=e},update:function(t){this.node.convertToWorldSpaceAR(cc.Vec2.ZERO).x+this.node.width<0&&this.manager.removeBridge(this.node)}}),cc._RF.pop()},{Config:"Config",Utils:"Utils"}],btn:[function(t,e,i){"use strict";cc._RF.push(e,"e1b4brnjV9Btq1Nwr8nju7u","btn"),cc.Class({extends:cc.Component,properties:{btnAudio:{default:null,url:cc.AudioClip}},start:function(){var t=this;this.node.on("touchstart",function(){"off"!==cc.sys.localStorage.getItem("effect_btn")&&cc.audioEngine.playEffect(t.btnAudio,!1)},this)}}),cc._RF.pop()},{}],debug:[function(t,e,i){"use strict";cc._RF.push(e,"35251SSwc9DM7BTTY3/YWxp","debug");var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("Config").DEBUG_MODE;cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node},logLabel:{default:null,type:cc.Label}},start:function(){n?(this.node.active=!0,this.updateContent()):this.node.active=!1,this.node.on("touchstart",function(t){t.stopPropagation()},this)},log:function(t){var e=t;"object"===(void 0===t?"undefined":c(t))&&(e=JSON.stringify(t)),this.logLabel.string+="\n"+e.toString(),this.updateContent()},updateContent:function(){this.content.height=this.logLabel.node.height+40}}),cc._RF.pop()},{Config:"Config"}],game:[function(t,e,i){"use strict";cc._RF.push(e,"ab1ed5MrUlCyp0ekzlqdyuC","game");var c=t("Config"),n=t("Utils"),o=c.FIRST_BRIDGE_WIDTH,s=c.STICK_DURATION,a=c.MOVE_DURATION,r=c.SCORE_SCALE_DURATION,u=c.CHICK_RUNTIME,h=c.OVER_DURATION,d=c.BOMB_OFFSETY,l=c.SHAKE_DURATION,g=c.SHAKE_OFFSET,f=c.SHAKE_COUNT,p=c.GAME_OVER_ADID,b=c.IN_FB;cc.Class({extends:cc.Component,properties:{moveLayer:{default:null,type:cc.Node},resultLayer:{default:null,type:cc.Node},helpLayer:{default:null,type:cc.Node},bridgeManagerNode:{default:null,type:cc.Node},stickManagerNode:{default:null,type:cc.Node},scoreNode:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},chickNode:{default:null,type:cc.Node},chickSpineNode:{default:null,type:cc.Node},bombWrap:{default:null,type:cc.Node},chickBomb:{default:null,type:cc.ParticleSystem},gasBomb:{default:null,type:cc.ParticleSystem},scoreAudio:{default:null,url:cc.AudioClip},stickGrowAudio:{default:null,url:cc.AudioClip},stickHitAudio:{default:null,url:cc.AudioClip},bombAudio:{default:null,url:cc.AudioClip},bgmAudio:{default:null,url:cc.AudioClip},backBtn:{default:null,type:cc.Node},helpBtn:{default:null,type:cc.Node}},onLoad:function(){n.initDebug(),this.bridgeManager=this.bridgeManagerNode.getComponent("bridgeManager"),this.stickManager=this.stickManagerNode.getComponent("stickManager"),this.chickBombParticle=this.chickBomb.getComponent(cc.ParticleSystem),this.gasBombParticle=this.gasBomb.getComponent(cc.ParticleSystem);var t=cc.winSize,e=t.height/3;this.chickNode.position=cc.v2(-t.width/2+o-this.chickNode.width/2,-t.height/2+e-4),this.chickSpine=this.chickSpineNode.getComponent("sp.Skeleton"),this.chickSpine.setAnimation(0,"wait",!0),cc.director.preloadScene("Hello"),"off"!==cc.sys.localStorage.getItem("music_btn")&&cc.audioEngine.playMusic(this.bgmAudio,!0),this.effectMute=!("off"!==cc.sys.localStorage.getItem("effect_btn")),b&&(this.initFbAd(),this.getFbStats())},initFbAd:function(){this.adLoaded=!1;var t=this,e=FBInstant.getSupportedAPIs().includes("getInterstitialAdAsync");n.log({getInterstitialAdAsyncSupport:e}),e&&FBInstant.getInterstitialAdAsync(p).then(function(e){return n.log(e),t.adInterstitial=e,e.loadAsync()}).then(function(){n.log("loaded"),t.adLoaded=!0})},getFbStats:function(){var t=this;this.FBstats=null,FBInstant.player.getStatsAsync(["bestScore"]).then(function(e){t.FBstats=e})},start:function(){this.pass=!0,this.startLocked=!1,this.endLocked=!1,this.score=0,this.bindEv()},bindEv:function(){var t=this;this.node.on("touchstart",this.onTouchStarted,this),this.node.on("touchend",this.onTouchEnded,this),this.backBtn.on("touchend",function(){t.startLocked||t.endLocked||cc.director.loadScene("Hello")},this),this.helpBtn.on("touchend",function(){t.startLocked||t.endLocked||(t.helpLayer.active=!0,t.helpLayer.getComponent("helpLayer").init())},this)},onTouchStarted:function(t){this.startLocked||(this.startLocked=!0,this.stickManager.createStick(),this.effectMute||(this.stickGrowAudioId=cc.audioEngine.playEffect(this.stickGrowAudio,!0)))},onTouchEnded:function(t){if(this.startLocked&&!this.endLocked){this.endLocked=!0;var e=this.stickManager.latestStick,i=e.getComponent("stick");i.stoppedGrow=!0,this.effectMute||cc.audioEngine.setLoop(this.stickGrowAudioId,!1);var c=o+e.height,n=this.bridgeManager.targetBridge,a=n.convertToWorldSpaceAR(cc.Vec2.ZERO);c>=a.x&&c<=a.x+n.width?this.pass=!0:this.pass=!1;var r=cc.rotateTo(s,90).easing(cc.easeSineIn()),u=cc.callFunc(function(){i.rotated=!0,this.effectMute||cc.audioEngine.playEffect(this.stickHitAudio,!1),this.chickRun()},this);e.runAction(cc.sequence(r,u))}},chickRun:function(t){var e=0,i=this.chickNode.width;if(this.pass){var c=this.bridgeManager.targetBridge;e=c.width>i?c.x+c.width-i/2:c.x+c.width/2}else{var n=this.stickManager.latestStick;e=n.x+n.height}this.chickSpine.setAnimation(0,"run",!0);var o=cc.moveTo(u,cc.p(e,this.chickNode.y)),s=cc.callFunc(this.chickFinishRun,this);this.chickNode.runAction(cc.sequence(o,s))},chickFinishRun:function(){if(this.pass){this.scoreAdd(),this.chickSpine.setAnimation(0,"wait",!0);var t=this.bridgeManager.targetBridge,e=t.convertToWorldSpaceAR(cc.Vec2.ZERO).x,i=cc.moveBy(a,cc.p(-e+o-t.width,0)).easing(cc.easeSineIn()),c=cc.callFunc(function(){this.bridgeManager.createBridge(),this.startLocked=!1,this.endLocked=!1},this);this.moveLayer.runAction(cc.sequence(i,c))}else this.gameOver()},scoreAdd:function(){this.score+=1,this.scoreLabel.string=this.score.toString(),this.effectMute||cc.audioEngine.playEffect(this.scoreAudio,!1);var t=cc.scaleTo(r,1.5).easing(cc.easeSineIn()),e=cc.scaleTo(r,1.2).easing(cc.easeSineIn());this.scoreNode.runAction(cc.sequence(t,e))},gameOver:function(){var t=this.stickManager.latestStick,e=cc.rotateTo(h,180).easing(cc.easeSineIn());t.runAction(e),this.chickSpine.setAnimation(0,"fall",!0);var i=this.bridgeManager.targetBridge,c=cc.moveBy(h,cc.p(0,-i.height-2*this.chickNode.height)).easing(cc.easeSineIn()),n=cc.callFunc(function(){this.bombWrap.x=this.chickNode.x,this.bombWrap.y=-cc.winSize.height/2+d,this.chickBombParticle.resetSystem(),this.gasBombParticle.resetSystem(),this.effectMute||cc.audioEngine.playEffect(this.bombAudio,!1);var t=cc.moveBy(l,cc.p(0,g)).easing(cc.easeSineIn()),e=cc.moveBy(l,cc.p(0,-g)).easing(cc.easeSineIn());this.moveLayer.runAction(cc.repeat(cc.sequence(t,e),f))},this),o=cc.delayTime(.5),s=cc.callFunc(this.doFaild,this);this.chickNode.runAction(cc.sequence(c,n,o,s))},doFaild:function(){this.resultLayer.getComponent("resultLayer").scoreValue=this.score,this.resultLayer.active=!0,b&&(this.adLoaded&&(n.log("showAsync"),this.adInterstitial.showAsync().then(function(){n.log("Interstitial ad finished successfully")}).catch(function(t){n.log(t.message)})),this.resultLayer.getComponent("resultLayer").FBstats=this.FBstats)}}),cc._RF.pop()},{Config:"Config",Utils:"Utils"}],hello:[function(t,e,i){"use strict";cc._RF.push(e,"db901kuw9RGCIMh0de0HeW4","hello");var c=t("Config"),n=t("Utils"),o=c.BOARD_DURATION,s=c.BOARD_ROTATE;cc.Class({extends:cc.Component,properties:{chick:{default:null,type:cc.Node},board:{default:null,type:cc.Node},startImg:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},effectBtn:{default:null,type:cc.Node},musicBtn:{default:null,type:cc.Node},spriteArray:{default:[],type:[cc.SpriteFrame]},bgmAudio:{default:null,url:cc.AudioClip}},onLoad:function(){var t=this;this.scheduleOnce(function(){t.startImg.active||(t.loading.active=!0)},.1),this.effectSprite=this.effectBtn.getComponent(cc.Sprite),this.musicSprite=this.musicBtn.getComponent(cc.Sprite);var e=cc.sys.localStorage.getItem("music_btn");this.setButton("effect",cc.sys.localStorage.getItem("effect_btn")),this.setButton("music",e),"off"!==e&&cc.audioEngine.playMusic(this.bgmAudio,!0),cc.director.preloadScene("Game",function(){t.startImg.active=!0,t.loading.active=!1})},start:function(){this.bindEv();var t=cc.rotateTo(o,s).easing(cc.easeSineInOut()),e=cc.rotateTo(o,-s).easing(cc.easeSineInOut());this.board.runAction(cc.repeatForever(cc.sequence(t,e)))},bindEv:function(){var t=this;this.chick.on("touchstart",function(){t.startImg.active&&(n.inviteFriend(),cc.director.loadScene("Game"))},this),this.effectBtn.on("touchend",function(){var e=cc.sys.localStorage.getItem("effect_btn");t.setButton("effect","on"===e?"off":"on")},this),this.musicBtn.on("touchend",function(){var e=cc.sys.localStorage.getItem("music_btn");t.setButton("music","on"===e?"off":"on")},this)},setButton:function(t,e){var i="off"===e?"off":"on";"effect"===t?(this.effectSprite.spriteFrame=this.spriteArray["off"===i?1:0],cc.sys.localStorage.setItem("effect_btn",i)):"music"===t&&(this.musicSprite.spriteFrame=this.spriteArray["off"===i?3:2],cc.sys.localStorage.setItem("music_btn",i),cc.audioEngine.setMusicVolume("off"===i?0:1))}}),cc._RF.pop()},{Config:"Config",Utils:"Utils"}],helpLayer:[function(t,e,i){"use strict";cc._RF.push(e,"03c6dGXQ0VAPbNx5o9Mi48y","helpLayer");var c=t("Config"),n=c.HELP_SCALE_DURATION1,o=c.HELP_SCALE_DURATION2;cc.Class({extends:cc.Component,properties:{wrap:{default:null,type:cc.Node},closeBtn:{default:null,type:cc.Node}},start:function(){this.bindEv(),this.init()},init:function(){this.wrap.scale=0;var t=cc.scaleTo(n,2).easing(cc.easeSineInOut()),e=cc.scaleTo(o,1.7).easing(cc.easeSineInOut());this.wrap.runAction(cc.sequence(t,e))},bindEv:function(){var t=this;this.node.on("touchstart",function(t){t.stopPropagation()},this),this.closeBtn.on("touchend",function(){t.node.active=!1},this)}}),cc._RF.pop()},{Config:"Config"}],resultLayer:[function(t,e,i){"use strict";cc._RF.push(e,"8c5f0VJVZ1O5JE6ZR+8Iofc","resultLayer");var c=t("Utils"),n=t("Config"),o=n.RESULT_SCALE_DURATION1,s=n.RESULT_SCALE_DURATION2,a=n.IN_FB;cc.Class({extends:cc.Component,properties:{wrap:{default:null,type:cc.Node},score:{default:null,type:cc.Label},bestScore:{default:null,type:cc.Label},homeBtn:{default:null,type:cc.Node},restartBtn:{default:null,type:cc.Node}},onLoad:function(){c.initDebug()},start:function(){var t=this;this.bindEv();var e=cc.scaleTo(o,2).easing(cc.easeSineInOut()),i=cc.scaleTo(s,1.7).easing(cc.easeSineInOut());if(this.wrap.runAction(cc.sequence(e,i)),this.score.string=this.scoreValue,a)null!==this.FBstats?this.setFBbestScore():FBInstant.player.getStatsAsync(["bestScore"]).then(function(e){t.FBstats=e,t.setFBbestScore()});else{var c=cc.sys.localStorage.getItem("best_score")||0,n=Math.max(c,this.scoreValue);this.bestScore.string=n,cc.sys.localStorage.setItem("best_score",n)}},setFBbestScore:function(){var t=this.FBstats.bestScore||0,e=Math.max(t,this.scoreValue);this.bestScore.string=e,FBInstant.player.setStatsAsync({bestScore:e}).then(function(){})},bindEv:function(){this.homeBtn.on("touchend",function(){cc.director.loadScene("Hello")},this),this.restartBtn.on("touchend",function(){cc.director.loadScene("Game")},this)}}),cc._RF.pop()},{Config:"Config",Utils:"Utils"}],stickManager:[function(t,e,i){"use strict";cc._RF.push(e,"98cf4HzAp9K2pjQb232gRLR","stickManager"),cc.Class({extends:cc.Component,properties:{stickPrefab:cc.Prefab,bridgeManagerNode:{default:null,type:cc.Node}},onLoad:function(){this.stickPool=new cc.NodePool;for(var t=0;t<2;t++){var e=cc.instantiate(this.stickPrefab);this.stickPool.put(e)}this.bridgeManager=this.bridgeManagerNode.getComponent("bridgeManager")},start:function(){this.latestStick=null},createStick:function(){var t=null;t=this.stickPool.size()>0?this.stickPool.get():cc.instantiate(this.stickPrefab);var e=this.bridgeManager.currentBridge;t.getComponent("stick").init(e,this),this.node.addChild(t),this.latestStick=t},removeStick:function(t){this.stickPool.put(t)}}),cc._RF.pop()},{}],stick:[function(t,e,i){"use strict";cc._RF.push(e,"af85bN7jY1MlKQAKZJpPLyY","stick");var c=t("Config"),n=c.STICK_WIDTH,o=c.STICK_GROW_SPEED,s=c.STICK_BORDER_WIDTH;cc.Class({extends:cc.Component,properties:{manager:{default:null,serializable:!1}},onLoad:function(){},start:function(){},init:function(t,e){var i=this.node,c=i.getChildByName("inner");this.stoppedGrow=!1,this.rotated=!1,i.position=cc.v2(t.x+t.width,-cc.winSize.height/2+t.height),i.width=n,i.height=0,i.rotation=0,c.width=n-2*s,c.height=0,this.manager=e},update:function(t){if(!this.stoppedGrow){var e=t*o,i=cc.winSize,c=Math.max(2*i.height/3,i.width),n=Math.min(this.node.height+e,c),a=this.node,r=a.getChildByName("inner");a.height=n,r.height=n-2*s}var u=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.rotated&&u.x+this.node.height<0&&this.manager.removeStick(this.node)}}),cc._RF.pop()},{Config:"Config"}]},{},["Config","Utils","btn","debug","bg","bgManager","bridge","bridgeManager","game","helpLayer","resultLayer","stick","stickManager","hello"]);